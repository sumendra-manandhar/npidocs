---
sidebar_position: 6
---

# 6. High Level Process Flow
Following is a high level process flow in NEPALPAY QR, in which Issuer and Acquirer may be in a same
or different scheme/ networks.

1. NPI includes APIs related to validation, payments, refund and query or reporting, that could be used
by Issuer and Acquirer. NPI shall authenticate the Issuer and Acquirer members prior to receiving
and/ or processing a message based on multi-layer security controls.

![Example Image](/img/Nepalpay/highlevel.png)

2. When a customer initiates a transaction, the message will be sent from Issuer or Issuer network to
NPI. NPI will perform technical and business level validations to transmit the message to
NEPALPAY QR core engine
3. The QR core engine will lodge the instruction and identify the parties in the payment chain, which
will also have details about Merchant Category Code (MCC), fees & charges, etc.
4. NEPALPAY QR core engine will send the request to NPI for debit leg of the transaction. Depending
on the arrangements, the party or account to be debited may differ.
5. Except in case of Debit Not Required, the QR core engine will transmit valid transactions to NPI for
Issuer or its customer account debit. Upon confirmation of debit leg, it will transmit credit leg of the
transaction through underlying core system to Acquirer/ Acquirer network on deferred basis, expect
for specific case of immediate credit.
6. It will then transmit the payment confirmation to Acquirer/ Acquirer network and the response sent
to the Issuer indicating either acceptance or rejection.
7. Members will pull the reports from NPI for reconciliation based on the status and information of the
transactions. And based on the reconciliation and settlement at the underlying payment system, the
Acquirer will initiate its merchant settlement as per its arrangement with the merchant.

## 6.1. On-Us Transactions Workflow
This is related to a case where Issuer and Acquirer are using NEPALPAY QR scheme. A general
transaction flow of NEPALPAY QR shall be as follows.

1. Customer will initiate a transaction from a channel provided by Iissuer, which is integrated with NPI.
2. The message will be sent by the issuer to NPI, which will perform technical and business validation.
3. It will then transmit a message to QR engine which will identify the parties in the payment chain to
initiate an instruction.
4. The QR engine will send the request to NPI for debit leg of the transaction which will be processed
on real-time basis through underlying payment system, whereas credit leg to the acquirer will be
done on deferred basis, except in specific merchant categories.
5. In case of PSPs being Issuers, settlement accounts of such entities maintained with its settlement
BFIs will be debited. However, if BFI is an Issuer, account of the customer/initiator would be debited,
unless for Debit Not Required case.
6. Deferred credit will be on acquirerâ€™s account at specified schedule, who will further credit the
creditor/merchant account, except for specific merchant categories where direct merchant account
will be credited.
7. The Issuer and Acquirer will use reporting APIs in NPI to extract the status of transaction, settlement
and fees details.
8. The final settlement between the BFIs will be done on multilateral net basis through RTGS system
and as part of the settlement arrangement of underlying core system.
9. Acquirers will have option to process their merchant settlement through underlying payment system
in NPI, for further credit to creditor/merchants on net basis or may have its own arrangement.

## 6.2. Inter-network Transactions Workflow
This is related to the cases where Issuer or Acquirer or both is Other Scheme/ Network. A general
transaction flow of inter-network transaction and settlement shall be as follows.

1. If one or both of the Issuer or Acquirer are in different QR networks, then such QR payment will be
considered as inter-network transaction and will be processed through NPI. All such QRs shall be
as per NepalQR or EMVCo standard and shall be identified by tags prescribed by NRB.

2. For inter-network QR payment, the issuer network will send the QR details to NPI, which will route
the information to acquirer or acquirer network.

3. Response received from the acquirer or acquirer network will be routed to the issuer or issuer
network through NPI.

4. Respective networks will further transmit the information and response to their issuer and acquirer.
   
5. Inter-network settlement will be done between the settlement banks of issuer network and acquirer
network based on the NSI generated by NPI through its underlying payment system.

